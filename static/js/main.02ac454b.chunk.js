(this["webpackJsonpextended-2fa"]=this["webpackJsonpextended-2fa"]||[]).push([[0],{156:function(e,t){},158:function(e,t){},168:function(e,t){},170:function(e,t){},197:function(e,t){},199:function(e,t){},200:function(e,t){},205:function(e,t){},207:function(e,t){},213:function(e,t){},215:function(e,t){},234:function(e,t){},246:function(e,t){},249:function(e,t){},277:function(e,t,n){"use strict";n.r(t);var i=n(0),r=(t=n(33),t=n.n(t),n(11)),a=n(299),c=n(296),o=n(297),s=n(3);function l(){return Object(s.jsx)(a.a,{position:"static",children:Object(s.jsx)(c.a,{children:Object(s.jsx)(o.a,{variant:"h6",children:"Extended 2FA"})})})}for(var u=n(298),d=n(77),h=function(e){var t=(e=e.details).secret,n=e.issuer,i=e.label,r=e.algorithm,a=e.digits;e=e.step,d.authenticator.options={step:e,digits:a,algorithm:r},e=d.authenticator.generate(t);return Object(s.jsxs)("div",{className:"totp-card",style:{width:"90vw",margin:"30px 0px",display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:"900",fontSize:"30px",border:"1px solid black",padding:"10px"},children:[Object(s.jsxs)("div",{className:"left",children:[Object(s.jsx)("div",{className:"provider-name",children:n}),Object(s.jsx)("div",{className:"account-name",style:{fontWeight:"300",fontSize:"10px"},children:i})]}),Object(s.jsx)("div",{className:"code",style:{display:"flex",alignItems:"center"},children:Object(s.jsx)("div",{children:e})})]})},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=new Uint8Array(256),j=0;j<p.length;j++)f[p.charCodeAt(j)]=j;var b=function(e){for(var t,n,i,r,a=.75*e.length,c=e.length,o=0,s=(a=("="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--),new ArrayBuffer(a)),new Uint8Array(a)),l=0;l<c;l+=4)t=f[e.charCodeAt(l)],n=f[e.charCodeAt(l+1)],i=f[e.charCodeAt(l+2)],r=f[e.charCodeAt(l+3)],s[o++]=t<<2|n>>4,s[o++]=(15&n)<<4|i>>2,s[o++]=(3&i)<<6|63&r;return a},g=n(51),x=!0;function m(e){var t=e.setAuthorized;function n(){navigator.credentials.preventSilentAccess(),navigator.credentials.create({publicKey:{authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"},challenge:b(Object(g.randomBytes)(16).toString("hex")),rp:{id:document.domain,name:"crossphoton inc."},user:{id:b(Object(g.randomBytes)(4).toString("hex")),name:"You",displayName:"You"},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}]}}).then((function(){return t(!0)})).catch((function(e){"NotAllowedError: The operation either timed out or was not allowed. See: https://www.w3.org/TR/webauthn-2/#sctn-privacy-considerations-client.".toString()===e.toString()&&(t(!0),localStorage.setItem("fingerprint","false"))}))}return x&&(x=!1,n()),Object(s.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"60vh",margin:"100px 30px 30px 30px",alignItems:"center"},children:[Object(s.jsx)("p",{children:"Authorization required"}),Object(s.jsx)(u.a,{onClick:n,variant:"contained",color:"secondary",children:"SCAN FINGERPRINT"})]})}var v=n(52),y=void 0;function O(e){function t(){(c=JSON.parse(localStorage.getItem("collection")))&&d(c.map((function(e,t){return Object(s.jsx)(h,{details:e},t)})))}var n=e.showScanner,a=(e=Object(i.useState)(!v.isMobile||"false"===localStorage.getItem("fingerprint")),(e=Object(r.a)(e,2))[0]),c=(e=e[1],JSON.parse(localStorage.getItem("collection"))),o=Object(i.useState)(c&&c.map((function(e,t){return Object(s.jsx)(h,{details:e},t)}))),l=(o=Object(r.a)(o,2))[0],d=o[1];o=v.isMobile?"No credentials found. Add some using the button below.":"This app is not meant for desktop devices as of now. Peace.";return y=clearInterval(y),y=setInterval(t,3e4),a?Object(s.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[null==c?Object(s.jsx)("div",{style:{margin:100},children:o}):Object(s.jsx)("div",{children:l}),Object(s.jsxs)("div",{align:"center",children:[v.isMobile&&Object(s.jsx)(u.a,{style:{margin:"10px"},variant:"contained",color:"primary",onClick:function(){y=clearInterval(y),n(!0)},children:"ADD"}),Object(s.jsx)(u.a,{style:{margin:"10px"},onClick:t,variant:"contained",color:"primary",children:"Refresh"})]})]}):Object(s.jsx)(m,{authorized:a,setAuthorized:e})}var S={page:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}};function w(e){return e=e.showScanner,Object(s.jsx)("div",{style:S.page,children:Object(s.jsx)("div",{className:"main-content",children:Object(s.jsx)(O,{showScanner:e})})})}var A=n(138),I=n(78),N=n.n(I),C=n(139),k=n(79),R=n(19);function q(e){var t=!0,n={};e=function(e){if("string"!=typeof e||e.length<7)return null;if(!(e=/otpauth:\/\/([A-Za-z]+)\/([^?]+)\??(.*)?/i.exec(e))||e.length<3)return null;(n=Object(r.a)(e,3))[0];var t=n[1],n=n[2];if(!t||!n)return null;var i=(i=(n=decodeURIComponent(n)).split(/: ?/))&&2===i.length?{issuer:i[0],account:i[1]}:{issuer:"",account:n};n=e[3]?new URLSearchParams(e[3]):[],e=Object(R.a)(n).reduce((function(e,t){var n=(t=Object(r.a)(t,2))[0];t=t[1];return e[n]=t,e}),{});return{type:t.toLowerCase(),label:i,query:e}}(e);return n.secret=e.query.secret,n.issuer=e.query.issuer||e.label.issuer||"N/A",n.algorithm=e.query.algorithm||"sha1",n.digits=Number(e.query.digits)||6,n.step=Number(e.query.period)||30,n.label=e.label.account,n.algorithm=String(n.algorithm).toLowerCase(),null==n.secret&&(t=!1),(t=null!=n.label&&t)?n:null}function T(e){k.a.WORKER_PATH=C.a;var t,n=e.hideScanner;function r(){var e=document.getElementById("scanner-video-element");function i(){return(i=Object(A.a)(N.a.mark((function e(i){var r,a,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(r=q(i))){e.next=5;break}t.stop(),e.next=6;break;case 5:return e.abrupt("return");case 6:a=[],null==(c=JSON.parse(localStorage.getItem("collection")))?localStorage.setItem("collection",JSON.stringify(a)):a=c,a.push(r),localStorage.setItem("collection",JSON.stringify(a)),localStorage.setItem("toPush",!0),n(!0);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(t=new k.a(e,(function(e){return i.apply(this,arguments)}))).start()}return Object(i.useEffect)(r),Object(s.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(s.jsx)("video",{id:"scanner-video-element",style:{maxWidth:"100vw",maxHeight:"100vh",padding:"10px 10px"}}),Object(s.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-evenly"},children:[Object(s.jsx)(u.a,{style:{padding:"20 5"},variant:"outlined",onClick:r,children:"START"}),Object(s.jsx)(u.a,{style:{padding:"20 5"},variant:"outlined",onClick:function(){t&&t.stop(),n(!0)},children:"STOP"})]})]})}t.a.render(Object(s.jsx)((function(){var e=Object(i.useState)(!1),t=(e=Object(r.a)(e,2))[0],n=e[1];return t?Object(s.jsx)(T,{hideScanner:function(e){return n(!e)}}):Object(s.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(s.jsx)(l,{}),Object(s.jsx)(w,{showScanner:n})]})}),{}),document.getElementById("root"))}},[[277,1,2]]]);