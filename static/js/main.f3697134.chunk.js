(this["webpackJsonpextended-2fa"]=this["webpackJsonpextended-2fa"]||[]).push([[0],{149:function(e,t){},151:function(e,t){},162:function(e,t){},164:function(e,t){},191:function(e,t){},193:function(e,t){},194:function(e,t){},199:function(e,t){},201:function(e,t){},220:function(e,t){},232:function(e,t){},235:function(e,t){},261:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(28),a=(t=n.n(i),n(17)),c=n(282),o=n(279),s=n(280),l=n(2);function u(){return Object(l.jsx)(c.a,{position:"static",children:Object(l.jsx)(o.a,{children:Object(l.jsx)(s.a,{variant:"h6",children:"Extended 2FA"})})})}for(var d=n(281),h=n(72),j=function(e){var t=(a=e.details).secret,n=a.issuer,r=a.label,i=a.algorithm,a=(e=a.digits,a.step);return h.authenticator.options={step:a,digits:e,algorithm:i},t=h.authenticator.generate(t),Object(l.jsxs)("div",{className:"totp-card",style:{width:"90vw",margin:"30px 0px",display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:"900",fontSize:"30px",border:"1px solid black",padding:"10px"},children:[Object(l.jsxs)("div",{className:"left",children:[Object(l.jsx)("div",{className:"provider-name",children:n}),Object(l.jsx)("div",{className:"account-name",style:{fontWeight:"300",fontSize:"10px"},children:r})]}),Object(l.jsx)("div",{className:"code",style:{display:"flex",alignItems:"center"},children:Object(l.jsx)("div",{children:t})})]})},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=new Uint8Array(256),g=0;g<p.length;g++)f[p.charCodeAt(g)]=g;var b=function(e){var t,n,r,i,a=.75*e.length,c=e.length,o=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);a=new ArrayBuffer(a);for(var s=new Uint8Array(a),l=0;l<c;l+=4)t=f[e.charCodeAt(l)],n=f[e.charCodeAt(l+1)],r=f[e.charCodeAt(l+2)],i=f[e.charCodeAt(l+3)],s[o++]=t<<2|n>>4,s[o++]=(15&n)<<4|r>>2,s[o++]=(3&r)<<6|63&i;return a},m=n(49),x=!0;function v(e){var t=e.setAuthorized;return"false"===localStorage.getItem("fingerprint")?(setTimeout((function(){return t(!0)}),100),null):(x&&(x=!1,n()),Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"60vh",margin:"100px 30px 30px 30px",alignItems:"center"},children:[Object(l.jsx)("p",{children:"Authorization required"}),Object(l.jsx)(d.a,{onClick:n,variant:"contained",color:"secondary",children:"SCAN FINGERPRINT"})]}));function n(){navigator.credentials.preventSilentAccess(),navigator.credentials.create({publicKey:{authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"},challenge:b(Object(m.randomBytes)(16).toString("hex")),rp:{id:document.domain,name:"crossphoton inc."},user:{id:b(Object(m.randomBytes)(4).toString("hex")),name:"You",displayName:"You"},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}]}}).then((function(){return t(!0)})).catch((function(e){"NotAllowedError: The operation either timed out or was not allowed. See: https://www.w3.org/TR/webauthn-2/#sctn-privacy-considerations-client.".toString()===e.toString()&&(t(!0),localStorage.setItem("fingerprint","false"))}))}}function y(e){var t,n=e.showScanner,i=Object(r.useState)(!0),c=(u=Object(a.a)(i,2))[0],o=u[1],s=Object(r.useState)(!navigator.userAgentData.mobile),u=(e=(h=Object(a.a)(s,2))[0],i=h[1],function(){o(!c)}),h=(s=JSON.parse(localStorage.getItem("collection")),"No credentials found. "+(navigator.userAgentData.mobile?"Add some using the button below.":"Add them in your phone."));return null!=s&&(t=s.map((function(e,t){return Object(l.jsx)(j,{details:e},t)}))),setInterval(u,1e3),e?Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[null==s?Object(l.jsx)("div",{style:{margin:100},children:h}):Object(l.jsx)("div",{children:t}),Object(l.jsxs)("div",{align:"center",children:[navigator.userAgentData.mobile&&Object(l.jsx)(d.a,{style:{margin:"10px"},variant:"contained",color:"primary",onClick:function(){return n(!0)},children:"ADD"}),Object(l.jsx)(d.a,{style:{margin:"10px"},onClick:u,variant:"contained",color:"primary",children:"Refresh"})]})]}):Object(l.jsx)(v,{authorized:e,setAuthorized:i})}var O={page:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}};function S(e){return e=e.showScanner,Object(l.jsx)("div",{style:O.page,children:Object(l.jsx)("div",{className:"main-content",children:Object(l.jsx)(y,{showScanner:e})})})}i=n(73);var w=n.n(i),A=n(129),C=n(130),N=n(74),I=n(131),k=function(e){if("string"!=typeof e||e.length<7)return null;var t=/otpauth:\/\/([A-Za-z]+)\/([^?]+)\??(.*)?/i.exec(e);if(!t||t.length<3)return null;var n=Object(a.a)(t,3),r=(n[0],n[1]);e=n[2];return r&&e?(n=(e=(n=decodeURIComponent(e)).split(/: ?/))&&2===e.length?{issuer:e[0],account:e[1]}:{issuer:"",account:n},t=t[3]?new URLSearchParams(t[3]):[],t=Object(I.a)(t).reduce((function(e,t){t=(n=Object(a.a)(t,2))[0];var n=n[1];return e[t]=n,e}),{}),{type:r.toLowerCase(),label:n,query:t}):null};function R(e){N.a.WORKER_PATH=C.a;var t,n=e.hideScanner;function r(){var e=document.getElementById("scanner-video-element");function r(){return(r=Object(A.a)(w.a.mark((function e(r){var i,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=!(l=s=void 0),l={},o=k(o=r),l.secret=o.query.secret,l.issuer=o.query.issuer||o.label.issuer||"N/A",l.algorithm=o.query.algorithm||"sha1",l.digits=Number(o.query.digits)||6,l.step=Number(o.query.period)||30,l.label=o.label.account,l.algorithm=String(l.algorithm).toLowerCase(),null==l.secret&&(s=!1),null==(i=(s=null!=l.label&&s)?l:null)){e.next=6;break}t.stop(),n(!0),e.next=7;break;case 6:return e.abrupt("return");case 7:a=[],null==(c=JSON.parse(localStorage.getItem("collection")))?localStorage.setItem("collection",JSON.stringify(a)):a=c,a.push(i),localStorage.setItem("collection",JSON.stringify(a)),localStorage.setItem("toPush",!0);case 13:case"end":return e.stop()}var o,s,l}),e)})))).apply(this,arguments)}(t=new N.a(e,(function(e){return r.apply(this,arguments)}))).start()}return setTimeout(r,500),Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(l.jsx)("video",{id:"scanner-video-element",style:{maxWidth:"100vw",maxHeight:"100vh",padding:"10px 10px"}}),Object(l.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-evenly"},children:[Object(l.jsx)(d.a,{style:{padding:"20 5"},variant:"outlined",onClick:r,children:"START"}),Object(l.jsx)(d.a,{style:{padding:"20 5"},variant:"outlined",onClick:function(){t&&t.stop(),n(!0)},children:"STOP"})]})]})}n=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=(e=t[0],t[1]);return e?Object(l.jsx)(R,{hideScanner:function(e){return n(!e)}}):Object(l.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(l.jsx)(u,{}),Object(l.jsx)(S,{showScanner:n})]})},t.a.render(Object(l.jsx)(n,{}),document.getElementById("root"))}},[[261,1,2]]]);